{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Facundo/Desktop/Angular/TP/saladejuegos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { addDoc, collection } from 'firebase/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@angular/fire/compat/auth\";\nexport class ResultadosService {\n  constructor(afs, afAuth) {\n    this.afs = afs;\n    this.afAuth = afAuth;\n    this.afAuth.authState.subscribe(user => {\n      if (!user) {\n        return;\n      }\n\n      if (user.displayName != null && user.email != null && user.photoURL != null && user.uid != null) {\n        this.user.displayName = user.displayName;\n        this.user.email = user.email;\n        this.user.photoUrl = user.photoURL;\n        this.user.uid = user.uid;\n      }\n\n      console.log(this.user);\n    });\n  }\n\n  guardarResultadoAhorcado(puntaje) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const docRef = yield addDoc(collection(_this.afs.firestore, \"Ahorcado\"), {\n          puntaje: puntaje,\n          correo: _this.user.email,\n          nombre: _this.user.displayName,\n          uid: _this.user.uid,\n          fecha: new Date()\n        });\n        console.log(\"Documento escrito en colección: \", docRef.id);\n      } catch (e) {\n        console.error(\"Error al agregar document: \", e);\n      }\n    })();\n  }\n\n}\n\nResultadosService.ɵfac = function ResultadosService_Factory(t) {\n  return new (t || ResultadosService)(i0.ɵɵinject(i1.AngularFirestore), i0.ɵɵinject(i2.AngularFireAuth));\n};\n\nResultadosService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ResultadosService,\n  factory: ResultadosService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AAKA,SAASA,MAAT,EAAiBC,UAAjB,QAAmC,oBAAnC;;;;AAMA,OAAM,MAAOC,iBAAP,CAAwB;EAG5BC,YAAoBC,GAApB,EAAkDC,MAAlD,EAAyE;IAArD;IAA8B;IAChD,KAAKA,MAAL,CAAYC,SAAZ,CAAsBC,SAAtB,CAAgCC,IAAI,IAAE;MACpC,IAAG,CAACA,IAAJ,EACA;QACE;MACD;;MACD,IAAGA,IAAI,CAACC,WAAL,IAAkB,IAAlB,IAA0BD,IAAI,CAACE,KAAL,IAAY,IAAtC,IAA8CF,IAAI,CAACG,QAAL,IAAe,IAA7D,IAAqEH,IAAI,CAACI,GAAL,IAAU,IAAlF,EACA;QACE,KAAKJ,IAAL,CAAUC,WAAV,GAAuBD,IAAI,CAACC,WAA5B;QACA,KAAKD,IAAL,CAAUE,KAAV,GAAiBF,IAAI,CAACE,KAAtB;QACA,KAAKF,IAAL,CAAUK,QAAV,GAAoBL,IAAI,CAACG,QAAzB;QACA,KAAKH,IAAL,CAAUI,GAAV,GAAeJ,IAAI,CAACI,GAApB;MAED;;MAGDE,OAAO,CAACC,GAAR,CAAY,KAAKP,IAAjB;IACC,CAhBH;EAkBA;;EAEIQ,wBAAwB,CAACC,OAAD,EAAgB;IAAA;;IAAA;MAE5C,IAAI;QACF,MAAMC,MAAM,SAASlB,MAAM,CAACC,UAAU,CAAC,KAAI,CAACG,GAAL,CAASe,SAAV,EAAoB,UAApB,CAAX,EAA4C;UACrEF,OAAO,EAAEA,OAD4D;UAErEG,MAAM,EAAE,KAAI,CAACZ,IAAL,CAAUE,KAFmD;UAGrEW,MAAM,EAAE,KAAI,CAACb,IAAL,CAAUC,WAHmD;UAIrEG,GAAG,EAAE,KAAI,CAACJ,IAAL,CAAUI,GAJsD;UAKrEU,KAAK,EAAE,IAAIC,IAAJ;QAL8D,CAA5C,CAA3B;QAOAT,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAAgDG,MAAM,CAACM,EAAvD;MAED,CAVD,CAUE,OAAOC,CAAP,EAAU;QACVX,OAAO,CAACY,KAAR,CAAc,6BAAd,EAA6CD,CAA7C;MAED;IAf2C;EAgB7C;;AAxC2B;;;mBAAjBvB,mBAAiByB;AAAA;;;SAAjBzB;EAAiB0B,SAAjB1B,iBAAiB;EAAA2B,YAFhB","names":["addDoc","collection","ResultadosService","constructor","afs","afAuth","authState","subscribe","user","displayName","email","photoURL","uid","photoUrl","console","log","guardarResultadoAhorcado","puntaje","docRef","firestore","correo","nombre","fecha","Date","id","e","error","i0","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Facundo\\Desktop\\Angular\\TP\\saladejuegos\\src\\app\\servicios\\resultados.service.ts"],"sourcesContent":["import { User } from './../interfaces/user';\nimport { AuthService } from 'src/app/servicios/auth.service';\nimport { Injectable } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { Firestore } from '@angular/fire/firestore';\nimport { addDoc, collection } from 'firebase/firestore';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResultadosService {\n  private user!: any;\n\n  constructor(private afs: AngularFirestore,private afAuth: AngularFireAuth) {\n    this.afAuth.authState.subscribe(user=>{\n      if(!user)\n      {\n        return ;\n      }\n      if(user.displayName!=null && user.email!=null && user.photoURL!=null && user.uid!=null)\n      {\n        this.user.displayName= user.displayName;\n        this.user.email= user.email;\n        this.user.photoUrl= user.photoURL;\n        this.user.uid= user.uid;\n\n      }\n\n\n      console.log(this.user);\n      });\n\n   }\n\n  async guardarResultadoAhorcado(puntaje: number)\n  {\n    try {\n      const docRef = await addDoc(collection(this.afs.firestore,\"Ahorcado\"), {\n        puntaje: puntaje,\n        correo: this.user.email,\n        nombre: this.user.displayName,\n        uid: this.user.uid,\n        fecha: new Date(),\n      });\n      console.log(\"Documento escrito en colección: \", docRef.id);\n\n    } catch (e) {\n      console.error(\"Error al agregar document: \", e);\n\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}