{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Facundo/Desktop/Angular/TP/saladejuegos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { collectionData } from '@angular/fire/firestore';\nimport { addDoc, collection, doc, updateDoc } from 'firebase/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@angular/fire/compat/auth\";\nexport let ResultadosService = /*#__PURE__*/(() => {\n  class ResultadosService {\n    constructor(afs, afAuth) {\n      this.afs = afs;\n      this.afAuth = afAuth;\n      this.user = {};\n      this.afAuth.authState.subscribe(user => {\n        if (!user) {\n          return;\n        }\n\n        this.user.displayName = user.displayName;\n        this.user.email = user.email;\n        this.user.photoUrl = user.photoURL;\n        this.user.uid = user.uid;\n      });\n    }\n\n    guardarResultado(juego, puntaje) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const docRef = yield addDoc(collection(_this.afs.firestore, juego), {\n            puntaje: puntaje,\n            correo: _this.user.email,\n            nombre: _this.user.displayName,\n            uid: _this.user.uid,\n            fecha: new Date()\n          });\n          console.log(\"Documento escrito en colección: \", docRef.id);\n          _this.user.id = docRef.id;\n        } catch (e) {\n          console.error(\"Error al agregar document: \", e);\n        }\n      })();\n    }\n\n    actualizarResultado(juego, puntaje) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        const placeRef = doc(_this2.afs.firestore, juego, _this2.user.id);\n        yield updateDoc(placeRef, {\n          puntaje: puntaje\n        }).then(res => {});\n      })();\n    }\n\n    guardarResultadoPokemon(juego, victorias, derrotas) {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const docRef = yield addDoc(collection(_this3.afs.firestore, juego), {\n            victorias: victorias,\n            derrotas: derrotas,\n            correo: _this3.user.email,\n            nombre: _this3.user.displayName,\n            uid: _this3.user.uid,\n            fecha: new Date()\n          });\n          console.log(\"Documento escrito en colección: \", docRef.id);\n          _this3.user.id = docRef.id;\n        } catch (e) {\n          console.error(\"Error al agregar document: \", e);\n        }\n      })();\n    }\n\n    actualizarResultadoPokemon(gano, juego, puntaje) {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        if (gano) {\n          const placeRef = doc(_this4.afs.firestore, juego, _this4.user.id);\n          yield updateDoc(placeRef, {\n            victorias: puntaje\n          });\n        } else {\n          const placeRef = doc(_this4.afs.firestore, juego, _this4.user.id);\n          yield updateDoc(placeRef, {\n            derrotas: puntaje\n          });\n        }\n      })();\n    }\n\n    traerResultados(juego) {\n      let placeRef = collection(this.afs.firestore, juego);\n      return collectionData(placeRef, {\n        idField: 'id'\n      });\n    }\n\n  }\n\n  ResultadosService.ɵfac = function ResultadosService_Factory(t) {\n    return new (t || ResultadosService)(i0.ɵɵinject(i1.AngularFirestore), i0.ɵɵinject(i2.AngularFireAuth));\n  };\n\n  ResultadosService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ResultadosService,\n    factory: ResultadosService.ɵfac,\n    providedIn: 'root'\n  });\n  return ResultadosService;\n})();","map":null,"metadata":{},"sourceType":"module"}