{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Facundo/Desktop/Angular/TP/saladejuegos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../servicios/auth.service\";\nimport * as i2 from \"@angular/fire/compat/auth\";\nexport class AdministradorGuard {\n  constructor(auth, afAuth) {\n    this.auth = auth;\n    this.afAuth = afAuth;\n  }\n\n  canActivate(route, state) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let admin = false;\n      const user = yield _this.auth.getUserLog();\n\n      if (user) {\n        const usuario = yield _this.auth.traerUsuario(user.uid);\n\n        if (usuario.perfil == 'administrador') {\n          admin = true;\n        }\n      }\n\n      return admin;\n    })();\n  }\n\n}\n\nAdministradorGuard.ɵfac = function AdministradorGuard_Factory(t) {\n  return new (t || AdministradorGuard)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.AngularFireAuth));\n};\n\nAdministradorGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AdministradorGuard,\n  factory: AdministradorGuard.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AAIA,SAASA,sBAAT,EAA8CC,mBAA9C,QAAkF,iBAAlF;;;;AAMA,OAAM,MAAOC,kBAAP,CAAyB;EAG7BC,YAAoBC,IAApB,EAA+CC,MAA/C,EAAsE;IAAlD;IAA2B;EAE9C;;EAEKC,WAAW,CAACC,KAAD,EAAgCC,KAAhC,EAA0D;IAAA;;IAAA;MAEzE,IAAIC,KAAK,GAAC,KAAV;MAEA,MAAMC,IAAI,SAAQ,KAAI,CAACN,IAAL,CAAUO,UAAV,EAAlB;;MAEE,IAAGD,IAAH,EACA;QACE,MAAME,OAAO,SAAQ,KAAI,CAACR,IAAL,CAAUS,YAAV,CAAuBH,IAAI,CAACI,GAA5B,CAArB;;QACA,IAAGF,OAAO,CAACG,MAAR,IAAgB,eAAnB,EACA;UACEN,KAAK,GAAC,IAAN;QACD;MACF;;MAGD,OAAOA,KAAP;IAhBuE;EAiB1E;;AAxB4B;;;mBAAlBP,oBAAkBc;AAAA;;;SAAlBd;EAAkBe,SAAlBf,kBAAkB;EAAAgB,YAFjB","names":["ActivatedRouteSnapshot","RouterStateSnapshot","AdministradorGuard","constructor","auth","afAuth","canActivate","route","state","admin","user","getUserLog","usuario","traerUsuario","uid","perfil","i0","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Facundo\\Desktop\\Angular\\TP\\saladejuegos\\src\\app\\guards\\administrador.guard.ts"],"sourcesContent":["import { Usuario } from 'src/app/clases/usuario';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { AuthService } from '../servicios/auth.service';\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AdministradorGuard implements CanActivate {\n\n  public usuarios!: Usuario[];\n  constructor(private auth: AuthService, private afAuth: AngularFireAuth) {\n\n  }\n\n  async canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean>\n  {\n    let admin=false;\n\n    const user= await this.auth.getUserLog();\n\n      if(user)\n      {\n        const usuario= await this.auth.traerUsuario(user.uid);\n        if(usuario.perfil=='administrador')\n        {\n          admin=true;\n        }\n      }\n\n\n      return admin;\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}