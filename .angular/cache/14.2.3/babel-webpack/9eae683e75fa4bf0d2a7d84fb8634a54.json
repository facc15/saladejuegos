{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Facundo/Desktop/Angular/TP/saladejuegos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { collectionData } from '@angular/fire/firestore';\nimport { addDoc, collection } from 'firebase/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@angular/fire/compat/auth\";\nexport let EncuestaService = /*#__PURE__*/(() => {\n  class EncuestaService {\n    constructor(afs, afAuth) {\n      this.afs = afs;\n      this.afAuth = afAuth;\n      this.user = {};\n      this.afAuth.authState.subscribe(user => {\n        if (!user) {\n          return;\n        }\n\n        this.user.displayName = user.displayName;\n        this.user.email = user.email;\n        this.user.photoUrl = user.photoURL;\n        this.user.uid = user.uid;\n      });\n    }\n\n    guardarEncuesta(encuestado) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const docRef = yield addDoc(collection(_this.afs.firestore, 'Encuesta'), {\n            correo: _this.user.email,\n            nombreDisplay: _this.user.displayName,\n            nombre: encuestado.nombre,\n            apellido: encuestado.apellido,\n            edad: encuestado.edad,\n            numero: encuestado.numero,\n            pregunta1: encuestado.pregunta1,\n            pregunta2: encuestado.pregunta2,\n            pregunta3: encuestado.pregunta3,\n            uid: _this.user.uid,\n            fecha: new Date()\n          });\n          console.log(\"Documento escrito en colección: \", docRef.id);\n          _this.user.id = docRef.id;\n        } catch (e) {\n          console.error(\"Error al agregar document: \", e);\n        }\n      })();\n    }\n\n    traerEncuesta() {\n      let placeRef = collection(this.afs.firestore, \"Encuesta\");\n      return collectionData(placeRef, {\n        idField: 'id'\n      });\n    }\n\n  }\n\n  EncuestaService.ɵfac = function EncuestaService_Factory(t) {\n    return new (t || EncuestaService)(i0.ɵɵinject(i1.AngularFirestore), i0.ɵɵinject(i2.AngularFireAuth));\n  };\n\n  EncuestaService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: EncuestaService,\n    factory: EncuestaService.ɵfac,\n    providedIn: 'root'\n  });\n  return EncuestaService;\n})();","map":null,"metadata":{},"sourceType":"module"}