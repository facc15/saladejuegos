"use strict";(self.webpackChunksaladejuegos=self.webpackChunksaladejuegos||[]).push([[592],{3139:(v,f,r)=>{r.r(f),r.d(f,{ChatModule:()=>u});var e=r(433),g=r(6895),c=r(3286),p=r(7001),h=r(4650);const _=[{path:"",children:[{path:"",component:c.P}]}];let m=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=h.oAB({type:l}),l.\u0275inj=h.cJS({imports:[p.Bz.forChild(_),p.Bz]}),l})(),u=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=h.oAB({type:l}),l.\u0275inj=h.cJS({imports:[g.ez,m,e.u5]}),l})()},3286:(v,f,r)=>{r.d(f,{P:()=>i});var e=r(4650),g=r(4004),c=r(1894),p=r(1205);let h=(()=>{class n{constructor(t,s){this.afs=t,this.afAuth=s,this.mensajes=[],this.usuario={},this.afAuth.authState.subscribe(d=>{!d||(this.usuario.nombre=d.displayName,this.usuario.uid=d.uid,null==d.displayName&&(this.usuario.nombre=d.email))})}cargarMensajes(){return this.itemsCollections=this.afs.collection("Mensajes",t=>t.orderBy("fecha","desc").limit(8)),this.itemsCollections.valueChanges().pipe((0,g.U)(t=>{this.mensajes=[];for(let s of t)this.mensajes.unshift(s);return this.mensajes}))}agregarMensaje(t){let s={nombre:this.usuario.nombre,mensaje:t,uid:this.usuario.uid,fecha:(new Date).getTime(),hora:(new Date).getHours()+":"+(new Date).getMinutes()};return this.itemsCollections.add(s)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(c.ST),e.LFG(p.zQ))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=r(6895),m=r(433);const u=function(n,o){return{"text-right":n,"text-left":o}},l=function(n,o){return{"badge-success":n,"badge-danger":o}};function a(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"span",7),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&n){const t=o.$implicit,s=e.oxw();e.Q6J("ngClass",e.WLB(5,u,s.chatService.usuario.uid==t.uid,s.chatService.usuario.uid!=t.uid)),e.xp6(1),e.Q6J("ngClass",e.WLB(8,l,s.chatService.usuario.uid==t.uid,s.chatService.usuario.uid!=t.uid)),e.xp6(1),e.AsE("",t.hora," - ",t.nombre,":"),e.xp6(2),e.Oqu(t.mensaje)}}let i=(()=>{class n{constructor(t){this.chatService=t,this.chatService.cargarMensajes().subscribe(()=>{setTimeout(()=>{this.elemento.scrollTop=this.elemento.scrollHeight},20)})}ngOnInit(){this.elemento=document.getElementById("msg")}enviarMensaje(){0!==this.mensaje.length&&this.chatService.agregarMensaje(this.mensaje).then(()=>this.mensaje="").catch(t=>console.log("Error al enviar",t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],decls:7,vars:2,consts:[[1,"main-container"],[1,"ventanaChat"],[2,"text-align","center"],["id","msg",1,"msg"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text","name","mensaje","placeholder","Enviar mensaje",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge","badge-pill","badge-primary",3,"ngClass"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Chat"),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,a,5,11,"div",4),e.TgZ(6,"input",5),e.NdJ("ngModelChange",function(C){return s.mensaje=C})("keyup.enter",function(){return s.enviarMensaje()}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",s.chatService.mensajes),e.xp6(1),e.Q6J("ngModel",s.mensaje))},dependencies:[_.mk,_.sg,m.Fj,m.JJ,m.On],styles:[".main-container[_ngcontent-%COMP%]{position:fixed;left:0;top:0;height:450px;width:250px}.msg[_ngcontent-%COMP%]{box-sizing:border-box;overflow-y:scroll;height:80%;width:100%;padding:5px;color:#000;background-color:#f5f5f5}.puntero[_ngcontent-%COMP%]{cursor:pointer}.ventanaChat[_ngcontent-%COMP%]{position:absolute;top:58px;left:1px;width:100%;height:100%;overflow:hidden;border:1px solid darkred;background-color:#000;color:#f5f5f5;border-radius:20px;border-bottom:20px;border-left:50px;border-right:50px}.mensajes[_ngcontent-%COMP%]{overflow-y:scroll;height:270px;padding:5px}.animacion[_ngcontent-%COMP%]{animation-duration:1s;animation-fill-mode:both}.fast[_ngcontent-%COMP%]{animation-duration:.3s;animation-fill-mode:both}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{animation-name:fadeIn}"]}),n})()},1447:(v,f,r)=>{r.d(f,{K:()=>i});var e=r(4650),g=r(6895),c=r(4984);function p(n,o){1&n&&e._UZ(0,"app-spinner",3)}function h(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(null==t?null:t.nombre),e.xp6(2),e.Oqu(t.correo),e.xp6(2),e.Oqu(t.victorias),e.xp6(2),e.Oqu(t.derrotas)}}function _(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"table",6)(1,"thead")(2,"tr")(3,"th")(4,"strong"),e._uU(5,"Nombre"),e.qZA()(),e.TgZ(6,"th")(7,"strong"),e._uU(8,"Correo"),e.qZA()(),e.TgZ(9,"th")(10,"strong"),e._uU(11,"Victorias"),e.qZA()(),e.TgZ(12,"th")(13,"strong"),e._uU(14,"Derrotas"),e.qZA()()()(),e.TgZ(15,"tbody"),e._UZ(16,"div",7),e.YNc(17,h,9,4,"tr",8),e.qZA(),e.TgZ(18,"button",9),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2);return e.KtG(d.cerrar())}),e._uU(19,"Cerrar"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(17),e.Q6J("ngForOf",t.listaOrdenada)}}function m(n,o){1&n&&e._UZ(0,"app-spinner",12)}function u(n,o){if(1&n&&(e.TgZ(0,"tr",13)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(null==t?null:t.nombre),e.xp6(2),e.Oqu(t.correo),e.xp6(2),e.Oqu(t.puntaje)}}function l(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"table",6)(1,"thead")(2,"tr")(3,"th")(4,"strong"),e._uU(5,"Nombre"),e.qZA()(),e.TgZ(6,"th")(7,"strong"),e._uU(8,"Correo"),e.qZA()(),e.TgZ(9,"th")(10,"strong"),e._uU(11,"Puntaje"),e.qZA()()()(),e.TgZ(12,"tbody")(13,"div",7),e.YNc(14,m,1,0,"app-spinner",10),e.qZA(),e.YNc(15,u,7,3,"tr",11),e.qZA(),e.TgZ(16,"button",9),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2);return e.KtG(d.cerrar())}),e._uU(17,"Cerrar"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(14),e.Q6J("ngIf",t.spinner),e.xp6(1),e.Q6J("ngForOf",t.listaOrdenada)}}function a(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,_,20,1,"table",5),e.YNc(2,l,18,2,"table",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.esPokemon),e.xp6(1),e.Q6J("ngIf",!t.esPokemon)}}let i=(()=>{class n{constructor(){this.cerrado=new e.vpe,this.spinner=!1}ngOnInit(){this.spinner=!0,setTimeout(()=>{this.listaResultados.length>0&&this.listaResultados.sort(this.esPokemon?(t,s)=>t.victorias>s.victorias?-1:t.victorias<s.victorias?1:0:(t,s)=>t.puntaje>s.puntaje?-1:t.puntaje<s.puntaje?1:0),this.spinner=!1,this.listaOrdenada=this.listaResultados},4e3)}cerrar(){this.cerrado.emit(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-resultados"]],inputs:{listaResultados:"listaResultados",esPokemon:"esPokemon"},outputs:{cerrado:"cerrado"},decls:3,vars:2,consts:[[1,"contenedorSpinner"],["class","spinner",4,"ngIf"],["class","contenedor","style","overflow-y: scroll;",4,"ngIf"],[1,"spinner"],[1,"contenedor",2,"overflow-y","scroll"],["class","table table-dark table-hover text-center overflow-auto",4,"ngIf"],[1,"table","table-dark","table-hover","text-center","overflow-auto"],[1,"salir"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-light","text-white","btn-lg",3,"click"],["class","text-center",4,"ngIf"],["style","cursor: pointer; overflow-y: scroll;",4,"ngFor","ngForOf"],[1,"text-center"],[2,"cursor","pointer","overflow-y","scroll"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,p,1,0,"app-spinner",1),e.qZA(),e.YNc(2,a,3,2,"div",2)),2&t&&(e.xp6(1),e.Q6J("ngIf",s.spinner),e.xp6(1),e.Q6J("ngIf",!s.spinner))},dependencies:[g.sg,g.O5,c.O],styles:[".contenedor[_ngcontent-%COMP%]{position:fixed;width:40%;top:58px;height:40%;align-items:center}.contenedorSpinner[_ngcontent-%COMP%]{position:absolute;width:40%;top:58px;height:40%;align-items:center;background-color:#413e3e}.spinner[_ngcontent-%COMP%]{top:40%;left:40%;position:absolute}.btn[_ngcontent-%COMP%]{text-align:center;background-color:#413e3e;width:100%;position:absolute;left:0}"]}),n})()},3802:(v,f,r)=>{r.d(f,{q:()=>m});var e=r(5861),g=r(3562),c=r(2731),p=r(4650),h=r(1894),_=r(1205);let m=(()=>{class u{constructor(a,i){this.afs=a,this.afAuth=i,this.user={},this.afAuth.authState.subscribe(n=>{!n||(this.user.displayName=n.displayName,this.user.email=n.email,this.user.photoUrl=n.photoURL,this.user.uid=n.uid)})}guardarResultado(a,i){var n=this;return(0,e.Z)(function*(){try{const o=yield(0,c.ET)((0,c.hJ)(n.afs.firestore,a),{puntaje:i,correo:n.user.email,nombre:n.user.displayName,uid:n.user.uid,fecha:new Date});console.log("Documento escrito en colecci\xf3n: ",o.id),n.user.id=o.id}catch(o){console.error("Error al agregar document: ",o)}})()}actualizarResultado(a,i){var n=this;return(0,e.Z)(function*(){const o=(0,c.JU)(n.afs.firestore,a,n.user.id);yield(0,c.r7)(o,{puntaje:i}).then(t=>{})})()}guardarResultadoPokemon(a,i,n){var o=this;return(0,e.Z)(function*(){try{const t=yield(0,c.ET)((0,c.hJ)(o.afs.firestore,a),{victorias:i,derrotas:n,correo:o.user.email,nombre:o.user.displayName,uid:o.user.uid,fecha:new Date});console.log("Documento escrito en colecci\xf3n: ",t.id),o.user.id=t.id}catch(t){console.error("Error al agregar document: ",t)}})()}actualizarResultadoPokemon(a,i,n){var o=this;return(0,e.Z)(function*(){if(a){const t=(0,c.JU)(o.afs.firestore,i,o.user.id);yield(0,c.r7)(t,{victorias:n})}else{const t=(0,c.JU)(o.afs.firestore,i,o.user.id);yield(0,c.r7)(t,{derrotas:n})}})()}traerResultados(a){let i=(0,c.hJ)(this.afs.firestore,a);return(0,g.BS)(i,{idField:"id"})}}return u.\u0275fac=function(a){return new(a||u)(p.LFG(h.ST),p.LFG(_.zQ))},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);