"use strict";(self.webpackChunksaladejuegos=self.webpackChunksaladejuegos||[]).push([[592],{3139:(C,h,a)=>{a.r(h),a.d(h,{ChatModule:()=>u});var e=a(433),f=a(6895),c=a(3286),d=a(7001),p=a(4650);const g=[{path:"",children:[{path:"",component:c.P}]}];let m=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[d.Bz.forChild(g),d.Bz]}),i})(),u=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[f.ez,m,e.u5]}),i})()},3286:(C,h,a)=>{a.d(h,{P:()=>r});var e=a(4650),f=a(4004),c=a(1894),d=a(1205);let p=(()=>{class n{constructor(o,l){this.afs=o,this.afAuth=l,this.mensajes=[],this.usuario={},this.afAuth.authState.subscribe(_=>{!_||(this.usuario.nombre=_.displayName,this.usuario.uid=_.uid,null==_.displayName&&(this.usuario.nombre=_.email))})}cargarMensajes(){return this.itemsCollections=this.afs.collection("Mensajes",o=>o.orderBy("fecha","desc").limit(8)),this.itemsCollections.valueChanges().pipe((0,f.U)(o=>{this.mensajes=[],console.log(o);for(let l of o)this.mensajes.unshift(l);return this.mensajes}))}agregarMensaje(o){let l={nombre:this.usuario.nombre,mensaje:o,uid:this.usuario.uid,fecha:(new Date).getTime(),hora:(new Date).getHours()+":"+(new Date).getMinutes()};return this.itemsCollections.add(l)}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(c.ST),e.LFG(d.zQ))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=a(6895),m=a(433);const u=function(n,t){return{"text-right":n,"text-left":t}},i=function(n,t){return{"badge-success":n,"badge-danger":t}};function s(n,t){if(1&n&&(e.TgZ(0,"div",6)(1,"span",7),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&n){const o=t.$implicit,l=e.oxw();e.Q6J("ngClass",e.WLB(5,u,l.chatService.usuario.uid==o.uid,l.chatService.usuario.uid!=o.uid)),e.xp6(1),e.Q6J("ngClass",e.WLB(8,i,l.chatService.usuario.uid==o.uid,l.chatService.usuario.uid!=o.uid)),e.xp6(1),e.AsE("",o.hora," - ",o.nombre,":"),e.xp6(2),e.Oqu(o.mensaje)}}let r=(()=>{class n{constructor(o){this.chatService=o,this.chatService.cargarMensajes().subscribe(()=>{setTimeout(()=>{this.elemento.scrollTop=this.elemento.scrollHeight},20)})}ngOnInit(){this.elemento=document.getElementById("msg")}enviarMensaje(){0!==this.mensaje.length&&this.chatService.agregarMensaje(this.mensaje).then(()=>this.mensaje="").catch(o=>console.log("Error al enviar",o))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],decls:7,vars:2,consts:[[1,"main-container"],[1,"ventanaChat"],[2,"text-align","center"],["id","msg",1,"msg"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text","name","mensaje","placeholder","Enviar mensaje",1,"form-control","btn-Chat",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge","badge-pill","badge-primary",3,"ngClass"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Chat"),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,s,5,11,"div",4),e.qZA(),e.TgZ(6,"input",5),e.NdJ("ngModelChange",function(v){return l.mensaje=v})("keyup.enter",function(){return l.enviarMensaje()}),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("ngForOf",l.chatService.mensajes),e.xp6(1),e.Q6J("ngModel",l.mensaje))},dependencies:[g.mk,g.sg,m.Fj,m.JJ,m.On],styles:[".main-container[_ngcontent-%COMP%]{position:relative;left:0;top:0}.msg[_ngcontent-%COMP%]{box-sizing:border-box;overflow-y:scroll;height:300px;padding:5px;color:#000;background-color:#f5f5f5}.btnChat[_ngcontent-%COMP%]{bottom:0%;top:10%;align-self:center}.puntero[_ngcontent-%COMP%]{cursor:pointer}.ventanaChat[_ngcontent-%COMP%]{position:fixed;top:70px;left:1px;width:20%;height:52%;overflow:hidden;border:1px solid darkred;background-color:#000;color:#f5f5f5;border-radius:20px;border-bottom:20px;border-left:50px;border-right:50px}.mensajes[_ngcontent-%COMP%]{overflow-y:scroll;height:270px;padding:5px}.animacion[_ngcontent-%COMP%]{animation-duration:1s;animation-fill-mode:both}.fast[_ngcontent-%COMP%]{animation-duration:.3s;animation-fill-mode:both}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{animation-name:fadeIn}"]}),n})()},1447:(C,h,a)=>{a.d(h,{K:()=>s});var e=a(4650),f=a(6895),c=a(4984);function d(r,n){1&r&&e._UZ(0,"app-spinner",7)}function p(r,n){if(1&r&&(e.TgZ(0,"tr",8)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.correo),e.xp6(2),e.Oqu(null==t?null:t.nombre),e.xp6(2),e.Oqu(t.victorias),e.xp6(2),e.Oqu(t.derrotas)}}function g(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th")(4,"strong"),e._uU(5,"Nombre"),e.qZA()(),e.TgZ(6,"th")(7,"strong"),e._uU(8,"Correo"),e.qZA()(),e.TgZ(9,"th")(10,"strong"),e._uU(11,"Victorias"),e.qZA()(),e.TgZ(12,"th")(13,"strong"),e._uU(14,"Derrotas"),e.qZA()()()(),e.TgZ(15,"tbody")(16,"div",3),e.YNc(17,d,1,0,"app-spinner",4),e.qZA(),e.YNc(18,p,9,4,"tr",5),e.qZA(),e.TgZ(19,"button",6),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.cerrar())}),e._uU(20,"Cerrar"),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(17),e.Q6J("ngIf",t.spinner),e.xp6(1),e.Q6J("ngForOf",t.listaOrdenada)}}function m(r,n){1&r&&e._UZ(0,"app-spinner",7)}function u(r,n){if(1&r&&(e.TgZ(0,"tr",8)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.correo),e.xp6(2),e.Oqu(null==t?null:t.nombre),e.xp6(2),e.Oqu(t.puntaje)}}function i(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th")(4,"strong"),e._uU(5,"Nombre"),e.qZA()(),e.TgZ(6,"th")(7,"strong"),e._uU(8,"Correo"),e.qZA()(),e.TgZ(9,"th")(10,"strong"),e._uU(11,"Puntaje"),e.qZA()()()(),e.TgZ(12,"tbody")(13,"div",3),e.YNc(14,m,1,0,"app-spinner",4),e.qZA(),e.YNc(15,u,7,3,"tr",5),e.qZA(),e.TgZ(16,"button",6),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.cerrar())}),e._uU(17,"Cerrar"),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(14),e.Q6J("ngIf",t.spinner),e.xp6(1),e.Q6J("ngForOf",t.listaOrdenada)}}let s=(()=>{class r{constructor(){this.cerrado=new e.vpe,this.spinner=!1}ngOnInit(){this.spinner=!0,setTimeout(()=>{this.listaResultados.length>0&&this.listaResultados.sort(this.esPokemon?(t,o)=>t.victorias>o.victorias?-1:t.victorias<o.victorias?1:0:(t,o)=>t.puntaje>o.puntaje?-1:t.puntaje<o.puntaje?1:0),this.spinner=!1,this.listaOrdenada=this.listaResultados},4e3)}cerrar(){this.cerrado.emit(!1)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-resultados"]],inputs:{listaResultados:"listaResultados",esPokemon:"esPokemon"},outputs:{cerrado:"cerrado"},decls:3,vars:2,consts:[[1,"contenedor"],["class","table table-dark table-hover text-center overflow-auto",4,"ngIf"],[1,"table","table-dark","table-hover","text-center","overflow-auto"],[1,"salir"],["class","text-center",4,"ngIf"],["style","cursor: pointer; overflow-y: scroll;",4,"ngFor","ngForOf"],[1,"btn","btn-outline-light","text-white","btn-lg",3,"click"],[1,"text-center"],[2,"cursor","pointer","overflow-y","scroll"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,g,21,2,"table",1),e.YNc(2,i,18,2,"table",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",o.esPokemon),e.xp6(1),e.Q6J("ngIf",!o.esPokemon))},dependencies:[f.sg,f.O5,c.O],styles:[".contenedor[_ngcontent-%COMP%]{position:fixed;width:40%;top:58px;align-items:center}.btn[_ngcontent-%COMP%]{text-align:center;background-color:#413e3e;width:100%;position:absolute;left:0}"]}),r})()},3802:(C,h,a)=>{a.d(h,{q:()=>m});var e=a(5861),f=a(3562),c=a(2731),d=a(4650),p=a(1894),g=a(1205);let m=(()=>{class u{constructor(s,r){this.afs=s,this.afAuth=r,this.user={},this.afAuth.authState.subscribe(n=>{!n||(this.user.displayName=n.displayName,this.user.email=n.email,this.user.photoUrl=n.photoURL,this.user.uid=n.uid)})}guardarResultado(s,r){var n=this;return(0,e.Z)(function*(){try{const t=yield(0,c.ET)((0,c.hJ)(n.afs.firestore,s),{puntaje:r,correo:n.user.email,nombre:n.user.displayName,uid:n.user.uid,fecha:new Date});console.log("Documento escrito en colecci\xf3n: ",t.id),n.user.id=t.id}catch(t){console.error("Error al agregar document: ",t)}})()}actualizarResultado(s,r){var n=this;return(0,e.Z)(function*(){const t=(0,c.JU)(n.afs.firestore,s,n.user.id);yield(0,c.r7)(t,{puntaje:r}).then(o=>{})})()}guardarResultadoPokemon(s,r,n){var t=this;return(0,e.Z)(function*(){try{const o=yield(0,c.ET)((0,c.hJ)(t.afs.firestore,s),{victorias:r,derrotas:n,correo:t.user.email,nombre:t.user.displayName,uid:t.user.uid,fecha:new Date});console.log("Documento escrito en colecci\xf3n: ",o.id),t.user.id=o.id}catch(o){console.error("Error al agregar document: ",o)}})()}actualizarResultadoPokemon(s,r,n){var t=this;return(0,e.Z)(function*(){if(s){const o=(0,c.JU)(t.afs.firestore,r,t.user.id);yield(0,c.r7)(o,{victorias:n})}else{const o=(0,c.JU)(t.afs.firestore,r,t.user.id);yield(0,c.r7)(o,{derrotas:n})}})()}traerResultados(s){let r=(0,c.hJ)(this.afs.firestore,s);return(0,f.BS)(r,{idField:"id"})}}return u.\u0275fac=function(s){return new(s||u)(d.LFG(p.ST),d.LFG(g.zQ))},u.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);