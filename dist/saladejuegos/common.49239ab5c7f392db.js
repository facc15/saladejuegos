"use strict";(self.webpackChunksaladejuegos=self.webpackChunksaladejuegos||[]).push([[592],{3139:(v,m,o)=>{o.r(m),o.d(m,{ChatModule:()=>C});var e=o(433),p=o(6895),f=o(3286),d=o(7001),c=o(4650);const g=[{path:"",children:[{path:"",component:f.P}]}];let l=(()=>{class a{}return a.\u0275fac=function(h){return new(h||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[d.Bz.forChild(g),d.Bz]}),a})(),C=(()=>{class a{}return a.\u0275fac=function(h){return new(h||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[p.ez,l,e.u5]}),a})()},3286:(v,m,o)=>{o.d(m,{P:()=>h});var e=o(4650),p=o(4004),f=o(1894),d=o(1205);let c=(()=>{class n{constructor(t,i){this.afs=t,this.afAuth=i,this.mensajes=[],this.usuario={},this.afAuth.authState.subscribe(r=>{!r||(this.usuario.nombre=r.displayName,this.usuario.uid=r.uid,null==r.displayName&&(this.usuario.nombre=r.email))})}cargarMensajes(){return this.itemsCollections=this.afs.collection("Mensajes",t=>t.orderBy("fecha","desc").limit(8)),this.itemsCollections.valueChanges().pipe((0,p.U)(t=>{this.mensajes=[],console.log(t);for(let i of t)this.mensajes.unshift(i);return this.mensajes}))}agregarMensaje(t){let i={nombre:this.usuario.nombre,mensaje:t,uid:this.usuario.uid,fecha:(new Date).getTime(),hora:(new Date).getHours()+":"+(new Date).getMinutes()};return this.itemsCollections.add(i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.ST),e.LFG(d.zQ))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=o(6895),l=o(433);const C=function(n,s){return{"text-right":n,"text-left":s}},a=function(n,s){return{"badge-success":n,"badge-danger":s}};function u(n,s){if(1&n&&(e.TgZ(0,"div",6)(1,"span",7),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&n){const t=s.$implicit,i=e.oxw();e.Q6J("ngClass",e.WLB(5,C,i.chatService.usuario.uid==t.uid,i.chatService.usuario.uid!=t.uid)),e.xp6(1),e.Q6J("ngClass",e.WLB(8,a,i.chatService.usuario.uid==t.uid,i.chatService.usuario.uid!=t.uid)),e.xp6(1),e.AsE("",t.hora," - ",t.nombre,":"),e.xp6(2),e.Oqu(t.mensaje)}}let h=(()=>{class n{constructor(t){this.chatService=t,this.chatService.cargarMensajes().subscribe(()=>{setTimeout(()=>{this.elemento.scrollTop=this.elemento.scrollHeight},20)})}ngOnInit(){this.elemento=document.getElementById("msg")}enviarMensaje(){0!==this.mensaje.length&&this.chatService.agregarMensaje(this.mensaje).then(()=>this.mensaje="").catch(t=>console.log("Error al enviar",t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],decls:7,vars:2,consts:[[1,"main-container"],[1,"ventanaChat"],[2,"text-align","center"],["id","msg",1,"msg"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text","name","mensaje","placeholder","Enviar mensaje",1,"form-control","btn-Chat",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge","badge-pill","badge-primary",3,"ngClass"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Chat"),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,u,5,11,"div",4),e.qZA(),e.TgZ(6,"input",5),e.NdJ("ngModelChange",function(j){return i.mensaje=j})("keyup.enter",function(){return i.enviarMensaje()}),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",i.chatService.mensajes),e.xp6(1),e.Q6J("ngModel",i.mensaje))},dependencies:[g.mk,g.sg,l.Fj,l.JJ,l.On],styles:[".main-container[_ngcontent-%COMP%]{position:relative;left:0;top:0}.msg[_ngcontent-%COMP%]{box-sizing:border-box;overflow-y:scroll;height:300px;padding:5px;color:#000;background-color:#f5f5f5}.btnChat[_ngcontent-%COMP%]{bottom:0%;top:10%;align-self:center}.puntero[_ngcontent-%COMP%]{cursor:pointer}.ventanaChat[_ngcontent-%COMP%]{position:fixed;top:70px;left:1px;width:20%;height:52%;overflow:hidden;border:1px solid darkred;background-color:#000;color:#f5f5f5;border-radius:20px;border-bottom:20px;border-left:50px;border-right:50px}.mensajes[_ngcontent-%COMP%]{overflow-y:scroll;height:270px;padding:5px}.animacion[_ngcontent-%COMP%]{animation-duration:1s;animation-fill-mode:both}.fast[_ngcontent-%COMP%]{animation-duration:.3s;animation-fill-mode:both}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{animation-name:fadeIn}"]}),n})()}}]);